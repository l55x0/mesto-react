{"version":3,"sources":["contexts/CurrentUserContext.js","images/fail.svg","images/success.svg","components/InfoTooltip.js","components/ProtectedRoute.js","hooks/useFormWithValidation.js","components/Register.js","components/Login.js","images/Logo.svg","components/Header.js","components/Card.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/RemovePlacePopup.js","components/Main.js","components/Footer.js","utils/auth.js","utils/api.js","components/App.js","index.js"],"names":["CurrentUserContext","createContext","InfoTooltip","props","isOpen","onClose","isSuccess","path","useLocation","pathname","image","success","fail","useEffect","handleEscapeClose","event","key","document","addEventListener","removeEventListener","onClick","e","target","currentTarget","className","type","src","alt","ProtectedRoute","loggedIn","isChecking","children","exact","to","useFormWithValidation","React","useState","values","setValues","errors","setErrors","isValid","setIsValid","isValidInputs","setIsValidInputs","resetFrom","useCallback","newValues","newErrors","newIsValid","newIsValidInputs","handleChange","evt","input","value","name","validationMessage","closest","checkValidity","Register","onRegister","id","onSubmit","preventDefault","password","confirmation","then","catch","err","console","log","message","email","placeholder","minLength","maxLength","onChange","required","Login","onLogin","Header","onSignOut","userEmail","isActive","setIsActive","logo","Card","card","onCardLike","onImageClick","onCardTrash","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","item","link","length","ImagePopup","PopupWithForm","title","textButton","isDisabled","EditProfilePopup","onUpdateUser","about","EditAvatarPopup","onUpdateAvatar","avatar","AddPlacePopup","onAddPlace","RemovePlacePopup","onDeleteCard","Main","isLoading","cards","onCardDelete","onAddPlaceSubmit","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isRemovePlacePopupOpen","setIsRemovePlacePopupOpen","selectedCard","setSelectedCard","useCardId","setUseCardId","handleCardClick","data","handleTrashClick","closeAllPopups","handleCardLike","map","Footer","BASE_URL","responseCheck","response","ok","json","Promise","reject","status","api","baseUrl","token","groupId","this","_address","_token","_groupId","res","fetch","headers","authorization","_checkResponse","method","body","JSON","stringify","App","initialData","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","setCards","setIsLoading","setCurrentUser","setLoggedIn","setData","setIsSuccess","history","useHistory","Error","getInitialCards","finally","getInfoUser","isAuthChecking","setIsAuthChecking","tokenCheck","jwt","localStorage","getItem","push","Provider","removeItem","removeCard","state","filter","changeLikeCardStatus","setCard","setUserAvatar","setInfoUser","auth","statusCode","setItem","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bf2ceea3.chunk.js","sourcesContent":["import { createContext } from 'react';\n\nexport const CurrentUserContext = createContext();","export default __webpack_public_path__ + \"static/media/fail.7c6a020b.svg\";","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","import React, { useEffect } from 'react';\nimport fail from '../images/fail.svg';\nimport success from '../images/success.svg';\nimport { useLocation } from 'react-router-dom';\n\nconst InfoTooltip = (props) => {\n  // Диструктуризированная переменная с пропсами\n  const {\n    isOpen,\n    onClose,\n    isSuccess\n  } = props;\n\n  const path = useLocation().pathname\n\n  const tooltip = () => {\n    if (path === '/sign-in' || path === '/sign-up') {\n      return isSuccess\n        ? \"Вы успешно зарегистрировались!\"\n        : \"Что-то пошло не так! Попробуйте ещё раз.\";\n    }\n\n    if (path === '/') {\n      return isSuccess\n        ? \"Вы успешно авторизовались!\"\n        : \"Что-то пошло не так!\";\n    }\n\n    return;\n  }\n\n  const image = isSuccess\n    ? success\n    : fail\n\n  // Реализация закрытия нажатием на ESC\n  useEffect(() => {\n    if (!isOpen) return;\n    const handleEscapeClose = (event) => {\n      if (event.key === \"Escape\") {\n        onClose();\n      }\n    };\n    document.addEventListener(\"keydown\", handleEscapeClose);\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscapeClose);\n    };\n  }, [isOpen, onClose]);\n\n  // Реализация закрытия по оверлею\n  const handleOverlayClose = (e) => {\n    if (e.target === e.currentTarget && isOpen) {\n      onClose();\n    }\n    return;\n  };\n\n\n  return (\n    <section\n      onClick={handleOverlayClose}\n      className={`popup popup_type_info-tooltip ${isOpen ? 'popup_opened' : ''}`}>\n      <div className=\"popup__container\">\n        <button\n          className=\"button popup__button-close\"\n          type=\"button\"\n          onClick={onClose}\n        />\n        <img className=\"popup__image-tooltip\" src={image} alt={\"Картинка подсказки\"}></img>\n        <p className=\"popup__tooltip\">{tooltip()}</p>\n      </div>\n    </section>\n  )\n}\n\nexport default InfoTooltip;","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ path, loggedIn, isChecking, children }) => {\n  return (\n    <Route path={path} exact>\n      { isChecking ? (\n        <main className={\"content page__content\"}></main>\n      ) : (\n        loggedIn ? children : <Redirect to=\"./sign-in\" />\n      )}\n    </Route>\n  )\n}\n\nexport default ProtectedRoute;","// Пользовательский Хук для сбора информации инпутов, и валидации формы\nimport React, { useCallback } from \"react\";\n\nexport const useFormWithValidation = () => {\n  const [values, setValues] = React.useState({});\n  const [errors, setErrors] = React.useState({});\n  const [isValid, setIsValid] = React.useState(false);\n\n  const [isValidInputs, setIsValidInputs] = React.useState({});\n\n  const handleChange = (evt) => {\n    const input = evt.target;\n    const value = input.value;\n    const name = input.name;\n    setValues({ ...values, [name]: value });\n    setErrors({ ...errors, [name]: input.validationMessage });\n    setIsValid(input.closest(\"form\").checkValidity());\n\n    setIsValidInputs({ ...isValidInputs, [name]: input.checkValidity() });\n  };\n\n  const resetFrom = useCallback(\n    (newValues = {}, newErrors = {}, newIsValid = false, newIsValidInputs = {}) => {\n      setValues(newValues);\n      setErrors(newErrors);\n      setIsValid(newIsValid);\n      setIsValidInputs(newIsValidInputs);\n    },\n    [setValues, setErrors, setIsValid]\n  );\n\n  return { values, handleChange, resetFrom, errors, isValid, isValidInputs };\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useFormWithValidation } from \"../hooks/useFormWithValidation\";\n\nconst Register = ({ onRegister }) => {\n\n  // Используем пользовательский Хук\n  const {\n    values,\n    handleChange,\n    resetFrom,\n    errors,\n    isValid,\n    isValidInputs\n  } = useFormWithValidation();\n\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    // Проверяем совпадение паролей\n    if (values.password !== values.confirmation) {\n\n      resetFrom({\n        email: values.email,\n      }, {\n        password: 'Пароли не совпадают',\n        confirmation: 'Пароли не совпадают'\n      }, false, {\n        email: true,\n      })\n      return;\n    }\n\n    // Запрос на сервер и обработка результата\n    onRegister(values)\n      .then(resetFrom())\n      .catch(err => {\n        console.log(err.message || 'Что то пошло не так')\n      })\n  }\n\n  return (\n    <main className=\"register content page__content\">\n      <div className=\"register__container\">\n        <h2 className=\"register__title\">Регистрация</h2>\n        <form\n          className=\"register__form\"\n          name=\"form\"\n          id=\"form-with-register\"\n          onSubmit={handleSubmit}>\n\n          <input\n            className={`register__input register__input_type_email\n        ${isValidInputs.email\n                ? 'register__input_state_valid'\n                : ''\n              }`}\n            type=\"email\"\n            placeholder=\"Email\"\n            name=\"email\"\n            id=\"register-input-email\"\n            minLength=\"2\"\n            maxLength=\"100\"\n            value={values.email || \"\"}\n            onChange={handleChange}\n            required\n          />\n          <span\n            id=\"register-input-email-error\"\n            className=\"register__error\">\n            {errors.email || \"\"}\n          </span>\n\n          <input\n            className={`register__input register__input_type_password\n        ${isValidInputs.password\n                ? 'register__input_state_valid'\n                : ''\n              }`}\n            type=\"password\"\n            placeholder=\"Пароль\"\n            name=\"password\"\n            id=\"register-input-password\"\n            minLength=\"6\"\n            maxLength=\"50\"\n            value={values.password || \"\"}\n            onChange={handleChange}\n            required\n          />\n          <span\n            id=\"register-input-password-error\"\n            className=\"register__error\">\n            {errors.password || \"\"}\n          </span>\n\n          <input\n            className={`register__input register__input_type_confirm-password\n        ${isValidInputs.confirmation\n                ? 'register__input_state_valid'\n                : ''\n              }`}\n            type=\"password\"\n            placeholder=\"Подтвердите пароль\"\n            name=\"confirmation\"\n            id=\"register-input-confirm-password\"\n            minLength=\"2\"\n            maxLength=\"50\"\n            value={values.confirmation || \"\"}\n            onChange={handleChange}\n            required\n          />\n          <span\n            id=\"register-input-confirm-password-error\"\n            className=\"register__error\">\n            {errors.confirmation || \"\"}\n          </span>\n\n          <button\n            className={`button register__button-submit \n            ${!isValid\n                ? 'register__button-submit_invalid'\n                : ''\n              }`}\n            type=\"submit\">\n            Зарегистрироваться\n          </button>\n        </form>\n        <div className=\"register__signin\">\n          <p>Уже зарегистрированы? <Link to=\"/sign-in\" className=\"register__login-link\">Войти</Link></p>\n        </div>\n      </div>\n    </main>\n  );\n}\n\nexport default Register;","import React from 'react';\nimport { useFormWithValidation } from \"../hooks/useFormWithValidation\";\n\nconst Login = ({ onLogin }) => {\n\n  // Используем пользовательский Хук\n  const {\n    values,\n    handleChange,\n    resetFrom,\n    errors,\n    isValid,\n    isValidInputs\n  } = useFormWithValidation();\n\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    onLogin(values)\n      .then(resetFrom())\n      .catch(err => {\n        console.log(err.message || 'Что то пошло не так')\n      })\n  }\n\n  return (\n    <main className=\"login content page__content\">\n      <div className=\"login__container\">\n        <h2 className=\"login__title\">Вход</h2>\n        <form\n          className=\"login__form\"\n          name=\"form\"\n          id=\"form-with-login\"\n          onSubmit={handleSubmit}>\n          <input\n            className={`login__input login__input_type_email\n        ${isValidInputs.email\n                ? 'login__input_state_valid'\n                : ''\n              }`}\n            type=\"email\"\n            placeholder=\"Email\"\n            name=\"email\"\n            id=\"login-input-email\"\n            maxLength=\"100\"\n            value={values.email || ''}\n            onChange={handleChange}\n            required\n          />\n          <span\n            id=\"login-input-email-error\"\n            className=\"login__error\">\n            {errors.email || \"\"}\n          </span>\n\n          <input\n            className={`login__input login__input_type_password\n        ${isValidInputs.password\n                ? 'login__input_state_valid'\n                : ''\n              }`}\n            type=\"password\"\n            placeholder=\"Пароль\"\n            name=\"password\"\n            id=\"login-input-password\"\n            maxLength=\"50\"\n            value={values.password || \"\"}\n            onChange={handleChange}\n            required\n          />\n          <span\n            id=\"login-input-password-error\"\n            className=\"login__error\">\n            {errors.password || \"\"}\n          </span>\n\n          <button\n            className={`button login__button-submit \n            ${!isValid\n                ? 'login__button-submit_invalid'\n                : ''\n              }`}\n            type=\"submit\">\n            Войти\n          </button>\n        </form>\n      </div>\n    </main>\n  );\n}\n\nexport default Login;","export default __webpack_public_path__ + \"static/media/Logo.a307e1c4.svg\";","import React, { useState } from 'react';\nimport { useLocation, Link } from 'react-router-dom';\nimport logo from '../images/Logo.svg';\n\nconst Header = (props) => {\n  const {\n    onSignOut,\n    userEmail,\n    loggedIn\n  } = props\n\n  const path = useLocation().pathname\n\n  // Стейт бургер-меню \n  const [isActive, setIsActive] = useState(false);\n\n  // Функция переключения состояния бургер-меню\n  const handleButton = () => {\n    setIsActive(!isActive)\n  }\n\n  return (\n    <header className=\"header page__header\">\n      <img\n        src={logo}\n        alt=\"Логотип проекта Места России\"\n        className=\"header__logo\"\n      />\n      {loggedIn\n        ? (<>\n          <button\n            type=\"button\"\n            className={`header__burger button \n        ${isActive\n                ? \"active\"\n                : \"\"}`}\n            onClick={handleButton}>\n            <span></span>\n          </button>\n          <nav\n            className={`header__menu \n      ${isActive\n                ? \"active\"\n                : \"\"}`}>\n            <ul className=\"header__list\">\n              <li>\n                <p className=\"header__email\">{userEmail}</p>\n              </li>\n              <li>\n                {path === \"/mesto\"}\n                <button\n                  className=\"button header__button header__button_type_exit\"\n                  onClick={onSignOut}>\n                  Выйти\n              </button>\n              </li>\n            </ul>\n          </nav></>)\n        : (<Link\n          className=\"button header__button\"\n          to={path === \"/sign-in\" ? \"/sign-up\" : \"/sign-in\"}>\n          {path === \"/sign-in\" ? \"Регистрация\" : \"Вход\"}\n        </Link>)}\n\n\n    </header >\n  );\n}\n\nexport default Header;","import React, { useContext } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\nconst Card = (props) => {\n  // Диструктуризированная переменная с пропсами\n  const {\n    card,\n    onCardLike,\n    onImageClick,\n    onCardTrash\n  } = props;\n\n  // Контекст с данными о пользователе\n  const currentUser = useContext(CurrentUserContext);\n\n  // Переменная с подтвержденным авторством \n  const isOwn = card.owner._id === currentUser._id;\n\n  // Проверка авторских лайков\n  const isLiked = card.likes\n    .some(item => item._id === currentUser._id);\n\n  // Функции компонента\n  // -- Нажатие на лайк\n  // -- Нажатие на фото\n  // -- Нажатие на урну\n  const handleLikeClick = () => onCardLike(card);\n  const handleImageClick = () => onImageClick(card);\n  function handleDeleteClick() { onCardTrash(card) }\n\n  return (\n    <article className=\"place\">\n      <img\n        className=\"place__image\"\n        alt={card.name}\n        src={card.link}\n        onClick={handleImageClick}\n      />\n      {isOwn\n        ? (<button\n          className=\"button place__button-remove\"\n          type=\"button\"\n          onClick={handleDeleteClick} />)\n        : null}\n      <div className=\"place__row-block\">\n        <h2 className=\"place__title\">{card.name}</h2>\n        <div className=\"place__column-block\">\n          <button\n            className={`button place__button-like \n            ${isLiked\n                ? ('place__button-like_active')\n                : ''}`}\n            type=\"button\"\n            onClick={handleLikeClick}\n          />\n          <span className=\"place__score-like\">{card.likes.length}</span>\n        </div>\n      </div>\n    </article>\n  );\n}\n\nexport default Card;","import React, { useEffect } from 'react';\n\nconst ImagePopup = (props) => {\n  // Диструктуризированная переменная с пропсами\n  const {\n    card,\n    onClose\n  } = props;\n\n  // Реализация закрытия нажатием на ESC\n  useEffect(() => {\n    const handleEscapeClose = (event) => {\n      if (event.key === \"Escape\") {\n        onClose();\n      }\n    };\n    document.addEventListener(\"keydown\", handleEscapeClose);\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscapeClose);\n    };\n  }, [onClose]);\n\n  // Реализация закрытия по оверлею\n  const handleOverlayClose = (event) => {\n    if (event.target === event.currentTarget) {\n      onClose();\n    }\n  };\n\n  return (\n    <section\n      onClick={handleOverlayClose}\n      className={`popup popup_blackout \n    ${card.isOpen\n          ? 'popup_opened'\n          : ''\n        }`}\n      id=\"popup-image\">\n      <figure className=\"popup__figure\">\n        <button\n          className=\"button popup__button-close\"\n          type=\"button\"\n          onClick={onClose}\n        />\n        <img\n          className=\"popup__image\"\n          alt={card.name}\n          src={card.link}\n        />\n        <figcaption\n          className=\"popup__caption\">\n          {card.name} / &copy; {card.owner.name}\n        </figcaption>\n      </figure>\n    </section>\n  );\n}\n\nexport default ImagePopup;","import React, { useEffect } from 'react';\n\nconst PopupWithForm = (props) => {\n  const {\n    children,\n    name,\n    title,\n    textButton,\n    isOpen,\n    onClose,\n    onSubmit,\n    isDisabled = false\n  } = props;\n\n  // Реализация закрытия нажатием на ESC\n  useEffect(() => {\n    if (!isOpen) return;\n    const handleEscapeClose = (event) => {\n      if (event.key === \"Escape\") {\n        onClose();\n      }\n    };\n    document.addEventListener(\"keydown\", handleEscapeClose);\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscapeClose);\n    };\n  }, [isOpen, onClose]);\n\n  // Реализация закрытия по оверлею\n  const handleOverlayClose = (e) => {\n    if (e.target === e.currentTarget && isOpen) {\n      onClose();\n    }\n    return;\n  };\n\n  return (\n    <section\n      onClick={handleOverlayClose}\n      className={`popup popup_type_${name} ${isOpen ? 'popup_opened' : ''}`}>\n      <div className=\"popup__container\">\n        <button\n          className=\"button popup__button-close\"\n          type=\"button\"\n          onClick={onClose}\n        />\n        <h2 className=\"popup__title\">{title}</h2>\n        <form\n          className={\"popup__form\"}\n          name={name}\n          id={name}\n          onSubmit={onSubmit}\n        >\n          {children}\n          <button\n            className={`button popup__button-submit \n            ${isDisabled\n                ? 'popup__button-submit_invalid'\n                : ''\n              }`}\n            type={\"submit\"}>\n            {textButton || \"\"}\n          </button>\n        </form>\n      </div>\n    </section>\n  );\n}\n\nexport default PopupWithForm;","import React, { useContext, useEffect } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport PopupWithForm from './PopupWithForm';\nimport { useFormWithValidation } from \"../hooks/useFormWithValidation\";\n\nconst EditProfilePopup = (props) => {\n  // Диструктуризированная переменная с пропсами\n  const {\n    onUpdateUser,\n    isOpen,\n    onClose\n  } = props;\n\n  // Используем пользовательский Хук\n  const {\n    values,\n    handleChange,\n    resetFrom,\n    errors,\n    isValid,\n    isValidInputs\n  } = useFormWithValidation();\n\n  // Контекст с данными о пользователе\n  const currentUser = useContext(CurrentUserContext);\n\n  useEffect(() => {\n    if (currentUser) {\n      resetFrom({\n        name: currentUser.name,\n        about: currentUser.about\n      }, {}, false, {});\n    }\n  }, [currentUser, resetFrom]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onUpdateUser(values)\n  }\n\n  return (\n    <PopupWithForm\n      name=\"popup-profile\"\n      title=\"Редактировать профиль\"\n      textButton=\"Сохранить\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      isDisabled={!isValid}\n    >\n      <input\n        className={`popup__input popup__input_type_author \n        ${isValidInputs.name\n            ? 'popup__input_state_valid'\n            : ''\n          }`}\n        type=\"text\"\n        placeholder=\"Ваше имя\"\n        id=\"popup-input-name\"\n        name='name'\n        minLength=\"2\"\n        maxLength=\"40\"\n        value={values.name || \"\"}\n        onChange={handleChange}\n        required\n      />\n      <span\n        id=\"popup-input-name-error\"\n        className=\"popup__error\">\n        {errors.name || \"\"}\n      </span>\n\n      <input\n        className={`popup__input popup__input_type_status \n        ${isValidInputs.about\n            ? 'popup__input_state_valid'\n            : ''\n          }`}\n        type=\"text\"\n        placeholder=\"Расскажите о себе\"\n        id=\"popup-input-status\"\n        name='about'\n        minLength=\"2\"\n        maxLength=\"200\"\n        value={values.about || \"\"}\n        onChange={handleChange}\n        required\n      />\n      <span\n        id=\"popup-input-status-error\"\n        className=\"popup__error\">\n        {errors.about || \"\"}\n      </span>\n\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React, { useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { useFormWithValidation } from \"../hooks/useFormWithValidation\";\n\nconst EditAvatarPopup = (props) => {\n  // Диструктуризированная переменная с пропсами\n  const {\n    onUpdateAvatar,\n    isOpen,\n    onClose\n  } = props;\n\n  // Используем пользовательский Хук\n  const {\n    values,\n    handleChange,\n    resetFrom,\n    errors,\n    isValid,\n    isValidInputs\n  } = useFormWithValidation();\n\n  // Контроль за открытием попапа и ресетом\n  useEffect(() => {\n    resetFrom()\n  }, [isOpen, resetFrom]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onUpdateAvatar(values)\n  }\n\n  return (\n    <PopupWithForm\n      name=\"add-avatar\"\n      title=\"Обновить аватар\"\n      textButton=\"Обновить\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      isDisabled={!isValid}\n    >\n      <input\n        className={`popup__input popup__input_type_photo \n        ${isValidInputs.avatar\n            ? ('popup__input_state_valid')\n            : ('')\n          }`}\n        type=\"url\"\n        placeholder=\"Ссылка на аватар\"\n        name='avatar'\n        id=\"popup-input-url-avatar\"\n        minLength=\"7\"\n        maxLength=\"300\"\n        value={values.avatar || \"\"}\n        onChange={handleChange}\n        required\n      />\n      <span\n        id=\"popup-input-url-avatar-error\"\n        className=\"popup__error\">\n        {errors.avatar || \"\"}\n      </span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n\n","import React, { useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { useFormWithValidation } from \"../hooks/useFormWithValidation\";\n\nconst AddPlacePopup = (props) => {\n  // Диструктуризированная переменная с пропсами\n  const {\n    onAddPlace,\n    isOpen,\n    onClose\n  } = props;\n\n  // Используем пользовательский Хук\n  const {\n    values,\n    handleChange,\n    resetFrom,\n    errors,\n    isValid,\n    isValidInputs\n  } = useFormWithValidation();\n\n  // Контроль за открытием попапа и ресетом\n  useEffect(() => {\n    resetFrom()\n  }, [isOpen, resetFrom]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onAddPlace(values)\n  }\n\n  return (\n    <PopupWithForm\n      name=\"add-card\"\n      title=\"Новое место\"\n      textButton=\"Сохранить\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      isDisabled={!isValid}\n    >\n      <input\n        className={`popup__input popup__input_type_place-name \n        ${isValidInputs.name\n            ? ('popup__input_state_valid')\n            : ('')\n          }`}\n        type=\"text\"\n        placeholder=\"Название\"\n        name=\"name\"\n        id=\"popup-input-place-name\"\n        minLength=\"2\"\n        maxLength=\"30\"\n        value={values.name || \"\"}\n        onChange={handleChange}\n        required\n      />\n      <span\n        id=\"popup-input-place-name-error\"\n        className=\"popup__error\">\n        {errors.name || \"\"}\n      </span>\n\n      <input\n        className={`popup__input popup__input_type_photo \n        ${isValidInputs.link\n            ? ('popup__input_state_valid')\n            : ('')\n          }`}\n        type=\"url\"\n        placeholder=\"Ссылка на картинку\"\n        id=\"popup-input-url\"\n        name=\"link\"\n        minLength=\"7\"\n        maxLength=\"300\"\n        value={values.link || \"\"}\n        onChange={handleChange}\n        required\n      />\n      <span\n        id=\"popup-input-url-error\"\n        className=\"popup__error\">\n        {errors.link || \"\"}\n      </span>\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nconst RemovePlacePopup = (props) => {\n  // Диструктуризированная переменная с пропсами\n  const {\n    onDeleteCard,\n    isOpen,\n    onClose\n  } = props;\n\n  // функция отправки формы\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onDeleteCard();\n  }\n\n  return (\n    <PopupWithForm\n      name=\"remove-card\"\n      title=\"Вы уверены?\"\n      textButton=\"Да\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    />\n  );\n}\n\nexport default RemovePlacePopup;","\nimport React, { useContext, useState } from 'react';\nimport Card from './Card.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n// popup components\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport RemovePlacePopup from './RemovePlacePopup';\n\nconst Main = (props) => {\n  // Диструктуризированная переменная с пропсами\n  const {\n    isLoading,\n    cards,\n    onCardDelete,\n    onCardLike,\n    onAddPlaceSubmit,\n    onUpdateAvatar,\n    onUpdateUser\n\n  } = props\n\n  const currentUser = useContext(CurrentUserContext);\n\n  // Стейт переменные компонента\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isRemovePlacePopupOpen, setIsRemovePlacePopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState({\n    isOpen: false,\n    owner: { name: '' }\n  });\n  const [useCardId, setUseCardId] = useState('');\n\n  // функции открытия попапов\n  const handleEditProfileClick = () => setIsEditProfilePopupOpen(true);\n  const handleAddPlaceClick = () => setIsAddPlacePopupOpen(true);\n  const handleEditAvatarClick = () => setIsEditAvatarPopupOpen(true);\n  const handleCardClick = (data) => setSelectedCard({\n    isOpen: true,\n    ...data\n  });\n  const handleTrashClick = (card) => {\n    setIsRemovePlacePopupOpen(true)\n    setUseCardId(card._id)\n  }\n\n  // функция закрытия всех попапов\n  const closeAllPopups = () => {\n    setIsEditProfilePopupOpen(false)\n    setIsAddPlacePopupOpen(false)\n    setIsEditAvatarPopupOpen(false)\n    setIsRemovePlacePopupOpen(false)\n    setSelectedCard({\n      isOpen: false,\n      owner: { name: '' }\n    })\n  }\n\n  const handleUpdateUser = (data) => {\n    onUpdateUser(data)\n      .then(closeAllPopups)\n      .catch(err => console.log(`Error: ${err}`));\n  }\n\n  const handleUpdateAvatar = (src) => {\n    onUpdateAvatar(src)\n      .then(closeAllPopups)\n      .catch(err => console.log(`Error: ${err}`));\n  }\n\n  const handleAddPlaceSubmit = (data) => {\n    onAddPlaceSubmit(data)\n      .then(closeAllPopups)\n      .catch(err => console.log(`Error: ${err}`));\n  }\n\n  const handleCardLike = (card) => {\n    onCardLike(card)\n      .catch(err => console.log(`Error: ${err}`));\n  }\n\n  const handleCardDelete = () => {\n    onCardDelete(useCardId)\n      .then(closeAllPopups)\n      .catch(err => console.log(`Error: ${err}`));\n  }\n\n  return (\n    <>\n      <main className={\"content page__content\"}>\n        <section className={\"profile content__item\"}>\n          <div\n            className={\"profile__overlay\"}\n            onClick={handleEditAvatarClick}>\n            <img\n              src={currentUser.avatar || \"#\"}\n              alt={`Аватар ${currentUser.name || \"\"}`}\n              className={\"profile__avatar\"} />\n          </div>\n          <div className={\"profile__text-block\"}>\n            <div className={\"profile__row-block\"}>\n              <h1\n                className={\"profile__author\"}>\n                {currentUser.name || \"Загрузка...\"}\n              </h1>\n              <button\n                className={\"button profile__button-edit\"}\n                type={\"button\"}\n                onClick={handleEditProfileClick}>\n              </button>\n            </div>\n            <p\n              className={\"profile__status\"}>\n              {currentUser.about || \"пожалуйста, подождите\"}\n            </p>\n          </div>\n          <button\n            className=\"button profile__button-add\"\n            type=\"button\"\n            onClick={handleAddPlaceClick}>\n          </button>\n        </section>\n\n        {isLoading\n          ? (<p>Загрузка...</p>)\n          : (<section className={\"places content__item\"}>\n            {cards.map(item => (\n              <Card\n                key={item._id}\n                card={item}\n                onImageClick={handleCardClick}\n                onCardLike={handleCardLike}\n                onCardTrash={handleTrashClick}\n              />\n            )\n            )}\n          </section>)\n        }\n      </main>\n\n      <EditProfilePopup\n        isOpen={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n      />\n\n      <AddPlacePopup\n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlaceSubmit}\n      />\n\n      <EditAvatarPopup\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n      />\n\n      <RemovePlacePopup\n        isOpen={isRemovePlacePopupOpen}\n        onClose={closeAllPopups}\n        onDeleteCard={handleCardDelete}\n      />\n\n      <ImagePopup\n        card={selectedCard}\n        onClose={closeAllPopups}\n      />\n    </>\n  )\n}\n\nexport default Main;\n","import React from 'react';\n\nconst Footer = () => {\n  return (\n    <footer className=\"footer page__footer\">\n      <p className=\"footer__author\">\n        &copy; 2020 Mesto Russia Lod55\n      </p>\n    </footer>\n  );\n}\n\nexport default Footer;","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nconst responseCheck = (response) => response.ok ? response.json() : Promise.reject(`Ошибка ${response.status}`);\n\nexport const register = ({ password, email }) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      \"password\": password,\n      \"email\": email\n    })\n  })\n    .then(responseCheck)\n};\n\nexport const authorize = ({ password, email }) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      \"password\": password,\n      \"email\": email\n    })\n  })\n    .then(responseCheck)\n};\n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": `Bearer ${token}`\n    }\n  })\n    .then(responseCheck)\n}","class Api {\n  constructor({ baseUrl, token, groupId }) {\n    this._address = baseUrl;\n    this._token = token;\n    this._groupId = groupId;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  }\n\n  getInitialCards() {\n    return fetch(`${this._address}/${this._groupId}/cards`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(this._checkResponse)\n  }\n\n  getInfoUser() {\n    return fetch(`${this._address}/${this._groupId}/users/me`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(this._checkResponse)\n  }\n\n  setInfoUser({ name, about }) {\n    return fetch(`${this._address}/${this._groupId}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name,\n        about\n      })\n    })\n      .then(this._checkResponse)\n  }\n\n  setCard({ name, link }) {\n    return fetch(`${this._address}/${this._groupId}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name,\n        link\n      })\n    })\n      .then(this._checkResponse)\n  }\n\n  removeCard(id) {\n    return fetch(`${this._address}/${this._groupId}/cards/${id}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n      }\n    })\n      .then(this._checkResponse)\n  }\n\n  changeLikeCardStatus(id, isLiked) {\n    return fetch(`${this._address}/${this._groupId}/cards/likes/${id}`, {\n      method: isLiked ? 'DELETE' : 'PUT',\n      headers: {\n        authorization: this._token,\n      }\n    })\n      .then(this._checkResponse)\n  }\n\n  setUserAvatar(src) {\n    return fetch(`${this._address}/${this._groupId}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: src,\n      })\n    })\n      .then(this._checkResponse)\n  }\n}\n\nconst config = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1',\n  token: '429ceaf1-0a34-48aa-a4c9-c70c2c79ac6e',\n  groupId: 'cohort-19'\n}\n\nconst api = new Api(config);\n\nexport default api;","import React, { useState, useEffect, useCallback } from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\n\n// popup components\nimport InfoTooltip from './InfoTooltip';\n\n// pages components\nimport ProtectedRoute from \"./ProtectedRoute\"\nimport Register from './Register';\nimport Login from './Login';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\n\n// api\nimport * as auth from '../utils/auth';\nimport api from '../utils/api.js'\n\nconst App = () => {\n  // Дефолтные значение данных пользователя для api/auth\n  const initialData = {\n    email: ''\n  }\n\n  // Стейт переменные компонента\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = useState(false);\n  const [cards, setCards] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentUser, setCurrentUser] = useState({});\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [data, setData] = useState(initialData);\n  const [isSuccess, setIsSuccess] = useState(false);\n\n  const history = useHistory();\n\n  // функция закрытия попапа\n  const closePopup = () => {\n    setIsInfoTooltipPopupOpen(false)\n  }\n\n\n  // ---------- Функции основного Api ----------\n  // Проверка наличия ответа сервера\n  const responseCheck = (res) => {\n    if (!res) throw new Error(`Error: ${res.message}`);\n  }\n\n  // Отправка информации на сервер\n  const handleUpdateUser = (data) => {\n    return api.setInfoUser(data)\n      .then(res => {\n        responseCheck(res);\n        setCurrentUser(res);\n        return res;\n      })\n  }\n\n  // Изменение аватара на сервере и отрисовка\n  const handleUpdateAvatar = (src) => {\n    return api.setUserAvatar(src)\n      .then(res => {\n        responseCheck(res);\n        setCurrentUser(res);\n        return res;\n      })\n  }\n\n  // Добавление новой карточки на сервер и отрисовка\n  const handleAddPlaceSubmit = ({ name, link }) => {\n    return api.setCard({ name, link })\n      .then(res => {\n        responseCheck(res);\n        setCards([res, ...cards]);\n        return res;\n      })\n  }\n\n  // Контоль состояния лайка и работа с состоянием на сервере\n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some(item => item._id === currentUser._id);\n\n    return api.changeLikeCardStatus(card._id, isLiked)\n      .then(res => {\n        responseCheck(res);\n        setCards(state => state.map(item => item._id === card._id ? res : item));\n        return res;\n      })\n  }\n\n  // Удаления карточки с сервера\n  const handleCardDelete = (useCardId) => {\n    return api.removeCard(useCardId)\n      .then(res => {\n        responseCheck(res);\n        setCards(state => state.filter(item => item._id === useCardId ? null : item));\n        return res;\n      })\n  }\n\n  useEffect(() => {\n    setIsLoading(true)\n    api.getInitialCards()\n      .then(res => {\n        setCards(res)\n      })\n      .catch(err => console.log(`Error: ${err}`))\n      .finally(() => setIsLoading(false))\n  }, []);\n\n  useEffect(() => {\n    api.getInfoUser()\n      .then(res => {\n        setCurrentUser(res);\n      })\n      .catch(err => console.log(`Error: ${err}`));\n  }, []);\n\n  // ---------- Функции запросов api/auth ----------\n  // Проверка токена пользователя на подленность на сервере\n  // проверка, что пользователь уже авторизован\n  const [isAuthChecking, setIsAuthChecking] = useState(true);\n  const tokenCheck = useCallback(() => {\n    const jwt = localStorage.getItem('jwt');\n\n    if (jwt) {\n      setIsAuthChecking(true);\n      auth.getContent(jwt)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true);\n            setData({\n              email: res.data.email\n            })\n            history.push('/mesto');\n          }\n        })\n        .catch(() => history.push('/sign-in'))\n        .finally(() => setIsAuthChecking(false))\n    } else {\n      setIsAuthChecking(false)\n    }\n  }, [history])\n\n  useEffect(() => {\n    tokenCheck();\n  }, [tokenCheck])\n\n  // Регистрации пользователя на сервере\n  const handleRegister = ({ password, email }) => {\n    return auth.register({ password, email })\n      .then(res => {\n        if (!res || res.statusCode === 400) throw new Error(`Ошибка: ${res.message}`);\n        setIsInfoTooltipPopupOpen(true);\n        setIsSuccess(true);\n        history.push('/sign-in')\n        return res;\n      })\n      .catch(err => {\n        setIsInfoTooltipPopupOpen(true);\n        setIsSuccess(false);\n        return err;\n      })\n  }\n\n  // Авторизации пользователя\n  const handleLogin = ({ password, email }) => {\n    return auth.authorize({ password, email })\n      .then(res => {\n        if (!res || res.statusCode === 400 || res.statusCode === 401) throw new Error(`Ошибка: ${res.message}`);\n        if (res.token) {\n          setIsInfoTooltipPopupOpen(true);\n          setIsSuccess(true);\n          setLoggedIn(true);\n          localStorage.setItem('jwt', res.token);\n        };\n      })\n      .then(tokenCheck)\n      .catch(err => {\n        setIsInfoTooltipPopupOpen(true);\n        setIsSuccess(false);\n        return err;\n      })\n  }\n\n  // Выход из системы\n  const handleSignOut = () => {\n    localStorage.removeItem('jwt');\n    setData(initialData);\n    setLoggedIn(false);\n    history.push('/sign-in');\n  }\n\n  return (\n    <div className=\"page__container\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header\n          loggedIn={loggedIn}\n          onSignOut={handleSignOut}\n          userEmail={data.email}\n        />\n\n        <Switch>\n          <ProtectedRoute\n            path=\"/\"\n            loggedIn={loggedIn}\n            isChecking={isAuthChecking}\n            exact>\n            <Main\n              onCardDelete={handleCardDelete}\n              onCardLike={handleCardLike}\n              onAddPlaceSubmit={handleAddPlaceSubmit}\n              onUpdateAvatar={handleUpdateAvatar}\n              onUpdateUser={handleUpdateUser}\n              cards={cards}\n              isLoading={isLoading}\n            />\n          </ProtectedRoute>\n\n          <Route path='/sign-in' exact>\n            <Login onLogin={handleLogin} />\n          </Route>\n\n          <Route path='/sign-up' exact>\n            <Register onRegister={handleRegister} />\n          </Route>\n\n          <Route path=\"*\">\n            {loggedIn\n              ? <Redirect to=\"/\" />\n              : <Redirect to=\"/sign-in\" />}\n          </Route>\n        </Switch>\n\n        <Footer />\n\n        <InfoTooltip\n          isOpen={isInfoTooltipPopupOpen}\n          onClose={closePopup}\n          isSuccess={isSuccess}\n        />\n\n      </CurrentUserContext.Provider>\n    </div>\n  )\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}